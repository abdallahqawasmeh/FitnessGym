@model MyGymSystem.Join.ContactVM
@using System.Linq

@{
    ViewData["Title"] = "Contact Us";
    Layout = "~/Views/Shared/_Layout.cshtml";

    // ✅ VM: single CMS row (seeded id=1)
    var contact = Model?.Page;
}

<!-- ✅ Dynamic Contact Content (Same design, only data source changed) -->
<section class="py-5">
    <div class="container">
        <div class="row align-items-center gy-4">

            <!-- Text -->
            <div class="col-lg-6">
                <h1 class="fw-bold mb-2">
                    @(!string.IsNullOrWhiteSpace(contact?.PageTitle) ? contact!.PageTitle : "Contact Us")
                </h1>

                <p class="text-muted mb-4">
                    @(!string.IsNullOrWhiteSpace(contact?.IntroText)
                            ? contact!.IntroText
                            : "We’re here to help. Feel free to reach out and we’ll get back to you as soon as possible.")
                </p>

                @if (!string.IsNullOrWhiteSpace(contact?.Contenet))
                {
                        <p class="mb-4">@contact!.Contenet</p>
                }

                <div class="row g-3">
                    @if (!string.IsNullOrWhiteSpace(contact?.Address))
                    {
                            <div class="col-12">
                                <div class="d-flex align-items-start gap-2">
                                    <i class="bi bi-geo-alt-fill text-primary mt-1"></i>
                                    <div>
                                        <div class="fw-semibold">Address</div>
                                        <div class="text-muted">@contact!.Address</div>
                                    </div>
                                </div>
                            </div>
                    }

                    @if (!string.IsNullOrWhiteSpace(contact?.Phonenumber))
                    {
                            <div class="col-12">
                                <div class="d-flex align-items-start gap-2">
                                    <i class="bi bi-telephone-fill text-success mt-1"></i>
                                    <div>
                                        <div class="fw-semibold">Phone</div>
                                        <div class="text-muted">@contact!.Phonenumber</div>
                                    </div>
                                </div>
                            </div>
                    }

                    @if (!string.IsNullOrWhiteSpace(contact?.Email))
                    {
                            <div class="col-12">
                                <div class="d-flex align-items-start gap-2">
                                    <i class="bi bi-envelope-fill text-danger mt-1"></i>
                                    <div>
                                        <div class="fw-semibold">Email</div>
                                        <div class="text-muted">@contact!.Email</div>
                                    </div>
                                </div>
                            </div>
                    }

                    @if (!string.IsNullOrWhiteSpace(contact?.WorkingHours))
                    {
                            <div class="col-12">
                                <div class="d-flex align-items-start gap-2">
                                    <i class="bi bi-clock-fill text-warning mt-1"></i>
                                    <div>
                                        <div class="fw-semibold">Working Hours</div>
                                        <div class="text-muted">@contact!.WorkingHours</div>
                                    </div>
                                </div>
                            </div>
                    }
                </div>
            </div>

            <!-- Image -->
            <div class="col-lg-6 text-center">
                <img src="@Url.Content(!string.IsNullOrWhiteSpace(contact?.Picpath) ? $"~/Images/{contact!.Picpath}" : "~/Images/default.jpg")"
                     class="img-fluid rounded shadow-sm"
                     style="max-height:360px; object-fit:cover; width:100%;"
                     alt="Contact Image" />
            </div>

        </div>

        <!-- Map (optional) -->
        @if (!string.IsNullOrWhiteSpace(contact?.Mapembedcode))
        {
                <div class="mt-4">
                    <div class="card shadow-sm border-0 overflow-hidden">
                        <div class="ratio ratio-16x9">
                        @Html.Raw(contact!.Mapembedcode)
                        </div>
                    </div>
                </div>
        }
    </div>
</section>


<!-- ✅ Your form (NOW WORKING) -->
<div class="container d-flex justify-content-center align-items-center" style="min-height: 150vh;">
    <div class="card shadow-lg p-4" style="width: 100%; max-width: 600px;">
        <h2 class="text-center mb-4">Contact Us</h2>

        @if (TempData["ContactSuccess"] != null)
        {
            <div class="alert alert-success">@TempData["ContactSuccess"]</div>
        }
        @if (TempData["ContactError"] != null)
        {
            <div class="alert alert-danger">@TempData["ContactError"]</div>
        }

        <form asp-action="Contact" asp-controller="Home" method="post">
            @Html.AntiForgeryToken()

            <div class="mb-3">
                <label asp-for="Form.Name" class="form-label">Your Name</label>
                <input asp-for="Form.Name" class="form-control" placeholder="Enter your name" required />
                <span asp-validation-for="Form.Name" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Form.Email" class="form-label">Your Email</label>
                <input asp-for="Form.Email" class="form-control" placeholder="Enter your email" required />
                <span asp-validation-for="Form.Email" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Form.Subject" class="form-label">Subject</label>
                <input asp-for="Form.Subject" class="form-control" placeholder="Enter subject" required />
                <span asp-validation-for="Form.Subject" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Form.Message" class="form-label">Message</label>
                <textarea asp-for="Form.Message" class="form-control" placeholder="Type your message here" required rows="5"></textarea>
                <span asp-validation-for="Form.Message" class="text-danger"></span>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary">Send Message</button>
            </div>
        </form>
    </div>
</div>


@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
